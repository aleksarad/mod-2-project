<h1>Feed</h1>
<hr>
<%= form_tag ({controller: 'posts',
    action: 'create',
    method: 'post'}) do %>
   <%= label_tag "What's the buzz?"%> <br>
   <%= text_area_tag :content %> <br>
   <%= submit_tag "Submit"%>
<% end %>
<hr>
<% @posts.feed_order.each do |post|%>
    <div class="post-container">
    <p><%=post.content%></p>
    by <%= link_to post.user.user_name, user_path(post.user_id), class: "user-link" %>
    <%= post.created_at.in_time_zone('Eastern Time (US & Canada)').strftime("%A, %B %d, %Y, %l:%M %p") %>
    
    <% if post.likes.count > 0 %>
        <%= form_tag ({controller: 'likes',
            action: 'remove_like',
            method: 'delete'}) do %>
            <input type=hidden name=post_id value="<%= post.id %>">
            <input type=hidden name=user_id value="<%= post.user_id %>">
            <input type=submit value='Unlike'>
        <% end %>
    <% else %>
        <%= form_tag ({controller: 'likes',
            action: 'add_like',
            method: 'post'}) do %>
            <input type=hidden name=post_id value="<%= post.id %>">
            <input type=hidden name=user_id value="<%= post.user_id %>">
            <input type=submit value='Like'>
        <% end %>
    <% end %>

    Likes: <%= post.likes.count%>
    <hr>
    </div>
<%end%>